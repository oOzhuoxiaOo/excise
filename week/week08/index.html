<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        table {
            margin: 0 auto;
            border-collapse: collapse;
            background-color: rgb(194, 241, 209);
            font-size: 26px;
        }
        td {
            border: solid 3px black;
            width: 100px;
            height: 100px;
            text-align: center;
        }
        .result {
            width: 400px;
            height: 300px;
            background-color: rgb(0, 0, 0);
            color: aliceblue;
            margin: 15px auto;
        }
    </style>
</head>
<body>
    <table>
        <tr>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
        </tr>
    </table>
    <div class="result">
        <h2>ç»“æœæŸ¥è¯¢</h2>
        <ol>
        </ol>
    </div>

    <script>
        // ğŸ“å‡½æ•°åŒºåŸŸ
        
        
        /*  ğŸ’¦
        åç§°: removeClick
        å‚æ•°ï¼šparame/that
                parame: 1/0 ä¸º1ç§»é™¤å…¨éƒ¨ ä¸º0ç§»é™¤å½“å‰äº‹ä»¶
                that: obj objä¸ºthisæ—¶ï¼Œå¯ç”¨thatä»£æ›¿ä¸Šçº§this,é¿å…ä¸ºwindow
        åŠŸèƒ½: ç§»é™¤tdsçš„ç‚¹å‡»äº‹ä»¶
        return:   */
         function removeClick(parame,that){
            if(parame == 1) {
                console.log('ç§»é™¤å…¨éƒ¨çš„ç‚¹å‡»äº‹ä»¶')
                tds.forEach((emt,index)=>{
                    emt.removeEventListener('click',changeGame);
                })
            } else if (parame == 0){
                console.log('ç§»é™¤å½“å‰æ‰€ç‚¹å‡»å…ƒç´ ğŸ‘‡çš„äº‹ä»¶')
                console.log(that);
                that.removeEventListener('click',changeGame);
            }
        }
        
        /*  ğŸ’¦ğŸ’¦
        åç§°: addPage
        å‚æ•°ï¼š0/1 
                0ï¼šè¾“å‡º ğŸ˜­
                1ï¼šè¾“å‡º ğŸ˜€
        åŠŸèƒ½: ä»¤resultå…ƒç´ åŒºåŸŸå°¾éƒ¨å¢åŠ ä¸€ä¸ªliæ ‡ç­¾ï¼ˆğŸ˜€/ğŸ˜­ï¼‰*/
        // return:
        let result = document.querySelector('.result ol')
        function addPage(parame,that) {
            let newLi = document.createElement('li');
            if(parame == 1) {
                newLi.innerText = `è¿™æ˜¯ç¬¬${k}æ¬¡ç‚¹å‡»,ğŸ˜€`;
            } 
            if(parame == 0) {
                newLi.innerText = `è¿™æ˜¯ç¬¬${k}æ¬¡ç‚¹å‡»,ğŸ˜­`;
            }
            result.appendChild(newLi);
        }
        
             /*  ğŸ’¦ğŸ’¦ğŸ’¦
        ç±»åˆ«ï¼šäº‹ä»¶å›è°ƒå‡½æ•°
        åç§°: changeGame
        å‚æ•°ï¼šæ— 
        åŠŸèƒ½: ç‚¹å‡»å¦‚æœä¸ºç›®æ ‡åˆ™è¾“å‡ºğŸ˜€  å¦‚æœä¸ä¸ºç›®æ ‡åˆ™è¾“å‡ºMiss*/
        // return:
        function changeGame(){
            k++;
            let getIndex = this.getAttribute('index');
            this.style.backgroundColor = 'pink';
            if(getIndex == rdm) {
                this.innerText='ğŸ˜€';
                this.style.backgroundColor = 'purple';
                removeClick(1,this);
                addPage(1);
            } else {
                this.innerText='Miss';
                removeClick(0,this);
                addPage(0);
            }}
        
        // éšæœºæ•°([0,8])
         let rdm = Math.floor(Math.random()*9);
         //æ‰“å¼€æ§åˆ¶å°è¾“å‡ºéšæœºæ•°ï¼Œç”¨æ¥æŸ¥çœ‹éšæœºæ•°ä¸ºå¤šå°‘ 
        console.log(rdm);
        // ç”¨æ¥è®°å½•ç‚¹å‡»æ¬¡æ•° æ¯æ¬¡è§¦å‘ç‚¹å‡»äº‹ä»¶ k++
        let k = 0;
        // æ‰€æœ‰tdæŒ‰é’®
        let tds = document.querySelectorAll('td');
        // éå†tdsæŒ‰é’®ï¼Œç»™é‡Œé¢æ¯ä¸ª tdæŒ‰é’®æ·»åŠ äº‹ä»¶
        tds.forEach((emt,index)=>{
            // æ·»åŠ è‡ªå®šä¹‰ç¡å±æ€§index ï¼ˆäº‹ä»¶ä¸­å½“å‰å…ƒç´ è‡ªå®šä¹‰å±æ€§indexå’Œéšæœºæ•°è¿›è¡Œæ¯”è¾ƒï¼‰
            emt.setAttribute('index',index);
            emt.addEventListener('click',changeGame);
        })
    </script>
</body>
</html>