<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }

        li {
            list-style: none;
        }

        .lunbotu {
            position: relative;
            width: 600px;
            height: 400px;
            /* border: solid red; */
            overflow: hidden;
            margin: 0 auto;
        }

        .list_lunbotu {
            position: absolute;
            top: 0;
            left: 0;
            width: 500%;
            height: 400px;
            background-color: rgb(183, 148, 148);
        }

        .list_lunbotu li {
            float: left;
            width: 20%;
            height: 400px;
        }

        /* .lunbotu .list_lunbotu li:nth-child(1) {
        } */
        .lt_lbt_one {
            background: url(/Image/Wp-0001.jpg) center / cover;
        }

        .lunbotu .list_lunbotu li:nth-child(2) {
            background: url(/Image/Wp-0002.jpg) center / cover;
        }

        .lunbotu .list_lunbotu li:nth-child(3) {
            background: url(/Image/Wp-0003.jpg) center / cover;
        }

        .lunbotu .list_lunbotu li:nth-child(4) {
            background: url(/Image/Wp-0004.jpg) center / cover;
        }

        .btn_left,
        .btn_right {
            position: absolute;
            width: 60px;
            height: 60px;
            top: 50%;
            background-color: rgb(220, 86, 86);
            cursor: pointer;
            z-index: 999;
        }

        .btn_left {
            display: none;
            left: 5px;
            transform: translateY(-50%);
            opacity: 0.7;
        }

        .btn_right {
            display: none;
            right: 5px;
            transform: translateY(-50%);
            opacity: 0.7;
        }

        .list_circle {
            position: absolute;
            left: 50%;
            transform: translate(-50%, 0);
            bottom: 10%;
            height: 20px;
            background-color: rgb(214, 163, 163);
        }

        .list_circle li {
            float: left;
            width: 20px;
            height: 20px;
            background-color: #fff;
            border-radius: 10px;
            margin: 0 5px;
            cursor: pointer;
        }
    </style>
    <script src="../å°è£…å‡½æ•°/animate.js"></script>
</head>

<body>
    <div class="lunbotu">
        <ul class="list_lunbotu">
            <li class="lt_lbt_one"></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
        <div class="btn_left">å·¦ç§»</div>
        <div class="btn_right">å³ç§»</div>
        <div class="list_circle"></div>
    </div>
    <script>
        let btn_left = document.querySelector('.btn_left');
        let btn_right = document.querySelector('.btn_right');
        let list_lunbotu = document.querySelector('.list_lunbotu');
        let lunbotu = document.querySelector('.lunbotu');

        // å®šæ—¶å™¨åˆå§‹åŒ–
        lunbotu.addEventListener('mouseover', function () {
            btn_left.style.display = 'block';
            btn_right.style.display = 'block';
            clearInterval(timer);
        })
        lunbotu.addEventListener('mouseout', function () {
            btn_left.style.display = 'none';
            btn_right.style.display = 'none';
            // â­â­å®šæ—¶å™¨
            timer = setInterval(function () {
                // å¼€å¯å³æŒ‰é’®äº‹ä»¶
                btn_right.click();
            }, 2000);
        })
        // ä½ç§»ç´¢å¼•(æ­¤å¤„-5~1)
        let xleft = 0;
        // å…‹éš†ç¬¬ä¸€ä¸ªå›¾ å¹¶ä¸”æ”¾åˆ°è½®æ’­å›¾åˆ—è¡¨çš„æœ€å
        let clone_picture = list_lunbotu.children[0].cloneNode();
        list_lunbotu.appendChild(clone_picture);

        //  ğŸ’§è½®æ’­ç‚¹
        // è®¾ç½®è½®æ’­ç‚¹æ•°ï¼Œæ ¹æ®è½®æ’­å›¾æ•°ï¼ˆä¸åŠ å…‹éš†çš„é‚£å¼ ï¼‰
        let list_circle = document.querySelector('.list_circle');
        for (let i = 0; i < list_lunbotu.children.length - 1; i++) {
            let li_circle = document.createElement('li');
            list_circle.appendChild(li_circle);
        }

        // ç»™æ¯ä¸ªè½®æ’­ç‚¹æ·»åŠ è‡ªå®šä¹‰å±æ€§indexç´¢å¼• å’Œäº‹ä»¶
        // å…ˆåˆå§‹åŒ–ç¬¬ä¸€ä¸ªå°åŸç‚¹
        list_circle.children[0].style.backgroundColor = 'purple';
        for (let i = 0; i < list_circle.children.length; i++) {
            list_circle.children[i].setAttribute('date-index', i);
            list_circle.children[i].addEventListener('click', function () {
                // åˆå§‹åŒ–æ‰€æœ‰åœ†ç‚¹lièƒŒæ™¯è‰²
                for (let j = 0; j < list_circle.children.length; j++) {
                    list_circle.children[j].style.backgroundColor = '#fff';
                }
                //è®¾ç½®æŒ‡å®šlièƒŒæ™¯è‰²
                this.style.backgroundColor = 'purple';
                // è·å¾—ç‚¹å‡»å°åœ†ç‚¹çš„ç´¢å¼•å€¼
                let c_index = this.getAttribute('date-index');
                console.log(c_index);
                // ä¿®æ”¹ä½ç§»ç´¢å¼• å¹¶ä¸”ç‚¹å‡»å°åœ†ç‚¹å‘ç”Ÿå¯¹åº”ä½ç§»
                xleft = - c_index;
                animate(list_lunbotu, 600 * xleft);
            })
        }

        // â­å·¦å³æŒ‰é’®
        // å·¦æŒ‰é’® 
        let flag = true;
        // èŠ‚æµé˜€ å½“è¿ç»­ç‚¹å‡»å³æŒ‰é’®æ—¶ ä¸Šä¸€ä¸ªæ²¡æœ‰å“¦æ‰§è¡Œå®Œæ¯• ä¸‹ä¸€ä¸ªä¸ä¼šæ‰§è¡Œ
        btn_left.addEventListener('click', function () {
            if (flag) {
                flag = false;
                xleft++;
                // ä½äºç¬¬ä¸€å›¾ä½æ—¶ç‚¹å‡»å·¦æŒ‰é’® xleftç”±0å˜ä¸º1 
                // æ­¤æ—¶éœ€è¦è®©å…‹éš†å›¾ä¸€å¸§è¦†ç›–åŸå›¾å¹¶ä¸”å‘å·¦å¹³ç§» è¾¾åˆ°éª—æœ¯ 
                if (xleft == 1) {
                    // å…‹éš†å›¾ä¸€å¸§è¦†ç›–åŸå›¾
                    xleft = - (list_lunbotu.children.length - 1);
                    list_lunbotu.style.left = `${600 * xleft}px`;
                    // å†xleft++å¹³ç§»è¾¾åˆ°éª—æœ¯
                    xleft++;
                }
                console.log(xleft);
                animate(list_lunbotu, 600 * xleft, function () {
                    flag = true;
                });

                // ğŸ“•
                // é€šè¿‡æŒ‰é’® å’Œå°åœ†ç‚¹äº¤äº’
                // åˆå§‹åŒ–æ‰€æœ‰åœ†ç‚¹lièƒŒæ™¯è‰²
                for (let j = 0; j < list_circle.children.length; j++) {
                    list_circle.children[j].style.backgroundColor = '#fff';
                }
                // è®¾ç½®å¯¹åº”å›¾å’Œåœ†ç‚¹ç´¢å¼•
                let xc_index = -xleft;
                if (xc_index == 4) {
                    xc_index = 0;
                }
                //è®¾ç½®æŒ‡å®šlièƒŒæ™¯è‰²
                list_circle.children[xc_index].style.backgroundColor = 'purple';
            }
        })

        // å³æŒ‰é’®
        btn_right.addEventListener('click', function () {
            if (flag) {
                flag = false;
                xleft--;
                // ä½äºå…‹éš†å›¾ä½æ—¶ç‚¹å‡»å³æŒ‰é’® xleftå˜ä¸º-5 
                // æ­¤æ—¶éœ€è¦è®©ç¬¬ä¸€å¼ å›¾ä¸€å¸§è¦†ç›–å…‹éš†å›¾å¹¶ä¸”å‘å³å¹³ç§» è¾¾åˆ°éª—æœ¯ 
                if (xleft == - list_lunbotu.children.length) {
                    // ç¬¬ä¸€å¼ å›¾ä¸€å¸§è¦†ç›–å…‹éš†å›¾
                    xleft = 0;
                    list_lunbotu.style.left = `${600 * xleft}px`;
                    // å†xleft--å¹³ç§»è¾¾åˆ°éª—æœ¯
                    xleft--;
                }
                console.log(xleft);
                animate(list_lunbotu, 600 * xleft, function () {
                    flag = true;
                });

                // ğŸ“•
                // é€šè¿‡æŒ‰é’® å’Œå°åœ†ç‚¹äº¤äº’
                // åˆå§‹åŒ–æ‰€æœ‰åœ†ç‚¹lièƒŒæ™¯è‰²
                for (let j = 0; j < list_circle.children.length; j++) {
                    list_circle.children[j].style.backgroundColor = '#fff';
                }
                // è®¾ç½®å¯¹åº”å›¾å’Œåœ†ç‚¹ç´¢å¼•
                let xc_index = -xleft;
                if (xc_index == 4) {
                    xc_index = 0;
                }
                //è®¾ç½®æŒ‡å®šlièƒŒæ™¯è‰²
                list_circle.children[xc_index].style.backgroundColor = 'purple';
            }
        })
        // â­â­å®šæ—¶å™¨
        let timer = setInterval(function () {
            // å¼€å¯å³æŒ‰é’®äº‹ä»¶
            btn_right.click();
        }, 2000);
    </script>
</body>

</html>